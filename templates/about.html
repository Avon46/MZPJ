<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="麻煮迷你石頭鍋 - 品牌故事">
  <title>關於麻煮｜麻煮迷你石頭鍋</title>
  <!-- 用 url_for 載入 CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
<header class="header">
  <div class="header__logo">
    <a href="{{ url_for('home') }}" class="header__logo-link">
      <img src="{{ url_for('static', filename='img/logo/MZ.jpg') }}" alt="麻煮logo"
           class="header__logo-img" loading="lazy">
    </a>
  </div>

  <!-- 中間選單 -->
  <nav class="header__nav">
    <ul class="header__nav-list">
      <li class="header__nav-item"><a href="{{ url_for('about') }}" class="header__nav-link is-active">關於麻煮</a></li>
      <li class="header__nav-item"><a href="{{ url_for('menu') }}" class="header__nav-link">菜單資訊</a></li>
      <li class="header__nav-item"><a href="{{ url_for('news') }}" class="header__nav-link">麻煮快訊</a></li>
      <li class="header__nav-item"><a href="{{ url_for('love') }}" class="header__nav-link">愛心公益</a></li>
    </ul>
  </nav>

  <!-- 漢堡選單 -->
  <button class="hamburger" id="hamburger" aria-label="開啟選單"
          aria-controls="mobile-nav" aria-expanded="false">
    <span class="hamburger__line"></span>
    <span class="hamburger__line"></span>
    <span class="hamburger__line"></span>
  </button>

  <!-- 右邊 icon -->
  <div class="header__icon">
    <img src="{{ url_for('static', filename='img/logo/world.jpg') }}" alt="世界圖標"
         class="header__icon-img" loading="lazy">
    <div class="lang-switch" role="group" aria-label="語言切換">
      <a href="#" class="lang-switch__btn lang-switch__btn--active" lang="zh-Hant" aria-current="true">中</a>
      <a href="#" class="lang-switch__btn" lang="en">EN</a>
    </div>
  </div>
</header>

<!-- 手機版導航 -->
<nav class="mobile-nav" id="mobile-nav" aria-hidden="true">
  <button class="mobile-nav__close" id="mobile-nav-close">×</button>
  <ul class="mobile-nav__list">
    <li class="mobile-nav__item"><a href="{{ url_for('home') }}" class="mobile-nav__link">首頁</a></li>
    <li class="mobile-nav__item"><a href="{{ url_for('about') }}" class="mobile-nav__link is-active">關於麻煮</a></li>
    <li class="mobile-nav__item"><a href="{{ url_for('menu') }}" class="mobile-nav__link">菜單資訊</a></li>
    <li class="mobile-nav__item"><a href="{{ url_for('news') }}" class="mobile-nav__link">麻煮快訊</a></li>
    <li class="mobile-nav__item"><a href="{{ url_for('love') }}" class="mobile-nav__link">愛心公益</a></li>
  </ul>
</nav>

<main class="main">
  <!-- Hero 區域 -->
  <section class="hero">
    <div class="mz-hero__banner"></div> <!-- 背景圖請用 CSS 設定，見下方備註 -->
    <div class="mz-hero__description">
      <h1 class="mz-hero__title">麻煮品牌故事</h1>
      <p class="mz-hero__subtitle">傳承媽祖精神，守護海洋生態，為您帶來最純粹的美味</p>
      <div class="brand-story-cta">
        <a href="#brand-story" class="brand-story-cta-btn">立即觀看品牌故事</a>
      </div>
    </div>
  </section>

  <!-- 品牌故事內容 -->
  <section id="brand-story" class="brand-story-section">
    <div class="brand-story-container">
      <h2 class="brand-story-title">石頭鍋的熱氣，承載媽祖的守護</h2>
      <p class="brand-story-subtitle">源自台灣信仰媽祖為靈感，傳統石頭小火鍋結合多元麻香，帶來台式熱騰騰的幸福滋味。</p>

      <div class="brand-story-content">
        <p>【麻煮】的命名取諧音來自於台灣沿海一帶的海神信仰，對海洋文化產生重大影響，稱為媽祖文化。</p>
        <p>媽祖被視為「護國庇民」的海洋守護神，如同我們希望以一碗熱騰騰的石頭火鍋，陪伴每位顧客安心、溫暖。</p>
        <p>【麻煮 Mazu】以「麻」為香，以「煮」為法，傳承台式小火鍋的熱情。從爆香石頭鍋、經典麻辣湯底，到麻油、麻醬、芝麻等多元麻香，延伸出豐富的個人鍋物選擇。
          無論是一個人的晚餐、小資聚會，還是外帶、外送，麻煮都能成為經濟又有品質的日常好味道。</p>
      </div>
    </div>
  </section>

  <!-- 門市資訊 -->
  <section id="store-info" class="store-info-section">
    <div class="store-info-container">
      <h2 class="store-info-title">門市資訊</h2>
      <p class="store-info-subtitle">歡迎蒞臨品嚐麻煮的美味</p>

      <div class="store-list">
        <div class="store-item">
          <!-- 左側：門市資訊 -->
          <div class="store-content">
            <div class="store-icon">🏪</div>
            <div class="store-details">
              <h3 class="store-name">麻煮台北公館店</h3>
              <p class="store-address">地址：<a href="https://www.google.com/maps?q=100台北市中正區汀州路三段273號" target="_blank" rel="noopener noreferrer">100 台北市中正區汀州路三段 273 號</a></p>
              <p class="store-phone">電話：<a href="tel:+886223456789">(02) 2345-6789</a></p>
              <p class="store-hours">營業時間：11:00–22:00</p>
            </div>
          </div>
          
          <!-- 右側：Google Map -->
          <div class="store-map map-embed">
            <!-- 主要地圖 iframe -->
            <iframe
              id="google-map-iframe"
              src="https://maps.google.com/maps?q=100台北市中正區汀州路三段273號&z=16&hl=zh-TW&output=embed&t=m"
              width="100%" 
              height="100%" 
              style="border:0;" 
              loading="lazy" 
              allowfullscreen 
              referrerpolicy="no-referrer-when-downgrade"
              title="麻煮台北公館店位置地圖">
            </iframe>
            
            <!-- 載入中提示 -->
            <div class="map-loading" id="map-loading">
              <div class="map-loading-spinner"></div>
              <p>地圖載入中...</p>
            </div>
            
            <!-- 降級方案：若 iframe 載入失敗顯示此按鈕 -->
            <div class="map-fallback" id="map-fallback">
              <div class="map-fallback-content">
                <div class="map-fallback-icon">🗺️</div>
                <p>地圖載入失敗</p>
                <a href="https://www.google.com/maps?q=100台北市中正區汀州路三段273號" 
                   target="_blank" 
                   rel="noopener noreferrer" 
                   class="map-fallback-btn">
                  在 Google 地圖開啟
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<!-- 回到頂部按鈕 -->
<button class="back-to-top" id="back-to-top" title="回到頂部">↑</button>

<footer class="footer">
  <p class="footer__text">© Powered and secured by MISS-TEPPAN</p>
</footer>

<!-- 地圖載入和錯誤處理腳本 -->
<script>
  // 地圖載入狀態管理
  document.addEventListener('DOMContentLoaded', function() {
    const mapIframe = document.getElementById('google-map-iframe');
    const mapLoading = document.getElementById('map-loading');
    const mapFallback = document.getElementById('map-fallback');
    
    if (mapIframe && mapLoading && mapFallback) {
      // 初始狀態：顯示載入中，隱藏降級方案
      mapLoading.style.display = 'flex';
      mapFallback.style.display = 'none';
      
      // 監聽 iframe 載入成功
      mapIframe.addEventListener('load', function() {
        console.log('Google Maps 載入成功');
        mapLoading.style.display = 'none';
        mapFallback.style.display = 'none';
        
        // 確保地圖可見
        mapIframe.style.opacity = '1';
      });
      
      // 監聽 iframe 載入錯誤
      mapIframe.addEventListener('error', function() {
        console.log('Google Maps 載入失敗');
        handleMapLoadError();
      });
      
      // 設定載入超時檢查（5秒）
      setTimeout(function() {
        if (mapLoading.style.display !== 'none') {
          console.log('Google Maps 載入超時');
          handleMapLoadError();
        }
      }, 5000);
      
      // 處理地圖載入錯誤的函數
      function handleMapLoadError() {
        mapLoading.style.display = 'none';
        mapFallback.style.display = 'flex';
        
        // 隱藏 iframe，避免顯示空白或錯誤內容
        mapIframe.style.opacity = '0';
        mapIframe.style.pointerEvents = 'none';
      }
      
      // 嘗試檢測 iframe 是否真的載入成功
      try {
        // 使用 Intersection Observer 檢測 iframe 是否可見
        const observer = new IntersectionObserver(function(entries) {
          entries.forEach(function(entry) {
            if (entry.isIntersecting) {
              // iframe 進入視窗，檢查是否真的載入成功
              setTimeout(function() {
                try {
                  // 嘗試存取 iframe 內容
                  if (mapIframe.contentWindow && mapIframe.contentWindow.location.href) {
                    // 載入成功
                    mapLoading.style.display = 'none';
                    mapIframe.style.opacity = '1';
                  }
                } catch (e) {
                  // 存取失敗，可能是跨域限制，但地圖可能已載入
                  console.log('無法存取 iframe 內容，但地圖可能已載入');
                  mapLoading.style.display = 'none';
                  mapIframe.style.opacity = '1';
                }
              }, 2000);
              
              observer.unobserve(entry.target);
            }
          });
        });
        
        observer.observe(mapIframe);
      } catch (e) {
        console.log('Intersection Observer 不支援，使用傳統方式');
      }
    }
  });
</script>

<!-- 用 url_for 載入 JS -->
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>