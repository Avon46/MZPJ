# ğŸ² éº»ç…®MINIçŸ³é ­ç«é‹å®˜ç¶²

![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)
![Flask](https://img.shields.io/badge/Flask-2.3.3-green.svg)
![HTML5](https://img.shields.io/badge/HTML5-E34F26.svg)
![CSS3](https://img.shields.io/badge/CSS3-1572B6.svg)
![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-yellow.svg)

é€™æ˜¯ä¸€å€‹ä½¿ç”¨ Flask å»ºç«‹çš„ç¾ä»£åŒ–é¤å»³å®˜æ–¹ç¶²ç«™ï¼Œèåˆäº†éŸ¿æ‡‰å¼è¨­è¨ˆã€API é©…å‹•çš„æ•¸æ“šç®¡ç†ï¼Œä»¥åŠæ„›å¿ƒå…¬ç›ŠåŠŸèƒ½ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

### ğŸ¨ ç”¨æˆ¶é«”é©—
- ğŸ“± **éŸ¿æ‡‰å¼è¨­è¨ˆ**: å®Œç¾æ”¯æ´æ¡Œæ©Ÿã€å¹³æ¿ã€æ‰‹æ©Ÿ
- ğŸ½ï¸ **èœå–® SPA**: å–®é æ‡‰ç”¨ç€è¦½é«”é©—ï¼Œç„¡éœ€é‡è¼‰é é¢
- âš¡ **æ•ˆèƒ½å„ªåŒ–**: Lazy loadingã€ç¯€æµé˜²æŠ–ã€å¿«å–æ©Ÿåˆ¶
- â™¿ **ç„¡éšœç¤™è¨­è¨ˆ**: ARIA æ¨™ç±¤ã€éµç›¤å°èˆªã€è¢å¹•é–±è®€å™¨æ”¯æ´
- ğŸ¯ **SEO å„ªåŒ–**: çµæ§‹åŒ–è³‡æ–™ã€Open Graphã€èªç¾©åŒ–æ¨™ç±¤

### â¤ï¸ æ„›å¿ƒå…¬ç›Šç³»çµ±
- ğŸ“Š **å³æ™‚æ•¸æ“š**: API é©…å‹•çš„å…¬ç›Šæ•¸å­—é¡¯ç¤º
- ğŸ¬ **å‹•ç•«æ•ˆæœ**: å¹³æ»‘çš„æ•¸å­—éå¢å‹•ç•«
- ğŸ”„ **éŒ¯èª¤è™•ç†**: æ™ºèƒ½é‡è©¦æ©Ÿåˆ¶å’Œå‹å–„éŒ¯èª¤æç¤º
- ğŸ” **ç®¡ç†ä»‹é¢**: ç›´è§€çš„æ•¸æ“šç®¡ç†å’Œå¿«é€Ÿæ“ä½œ
- ğŸ’¾ **å¿«å–æ©Ÿåˆ¶**: æå‡è¼‰å…¥é€Ÿåº¦å’Œç”¨æˆ¶é«”é©—

### ğŸ›¡ï¸ å®‰å…¨æ€§
- ğŸš¦ **é€Ÿç‡é™åˆ¶**: é˜²æ­¢ API æ¿«ç”¨ (100æ¬¡/åˆ†é˜)
- ğŸ”’ **è¼¸å…¥é©—è­‰**: åš´æ ¼çš„æ•¸æ“šé©—è­‰å’Œéæ¿¾
- ğŸŒ **CORS è¨­å®š**: å®‰å…¨çš„è·¨ç¶²åŸŸè³‡æºå…±äº«
- ğŸ“ **æ—¥èªŒè¨˜éŒ„**: å®Œæ•´çš„æ“ä½œå’ŒéŒ¯èª¤æ—¥èªŒ

## ğŸ—ï¸ æŠ€è¡“æ¶æ§‹

### å¾Œç«¯æŠ€è¡“æ£§
```python
Flask 2.3.3          # Web æ¡†æ¶
Flask-CORS 4.0.0     # è·¨ç¶²åŸŸæ”¯æ´
Python 3.8+          # ç¨‹å¼èªè¨€
```

### å‰ç«¯æŠ€è¡“æ£§
```javascript
HTML5                # èªç¾©åŒ–æ¨™ç±¤
CSS3                 # Grid/Flexbox + CSSè®Šæ•¸
ES6+ JavaScript     # æ¨¡çµ„åŒ–è¨­è¨ˆ
```

### æ¶æ§‹è¨­è¨ˆæ¨¡å¼
- **MVC æ¶æ§‹**: æ¸…æ™°çš„æ¨¡å‹-è¦–åœ–-æ§åˆ¶å™¨åˆ†é›¢
- **RESTful API**: æ¨™æº–åŒ–çš„ API è¨­è¨ˆ
- **çµ„ä»¶åŒ–**: å¯é‡ç”¨çš„å‰ç«¯çµ„ä»¶
- **éŸ¿æ‡‰å¼è¨­è¨ˆ**: Mobile-first é–‹ç™¼ç­–ç•¥

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
ğŸ“¦ mysite/
â”œâ”€â”€ ğŸ app.py                    # Flask ä¸»ç¨‹å¼ + API è·¯ç”±
â”œâ”€â”€ ğŸ“‹ requirements.txt          # Python ä¾è³´ç®¡ç†
â”œâ”€â”€ ğŸ“– README.md                 # å°ˆæ¡ˆæ–‡ä»¶ (æœ¬æª”æ¡ˆ)
â”œâ”€â”€ ğŸ“œ CHANGELOG.md              # ç‰ˆæœ¬æ›´æ–°æ—¥èªŒ
â”œâ”€â”€ ğŸš« .gitignore               # Git å¿½ç•¥æª”æ¡ˆ
â”œâ”€â”€ ğŸ“ static/                   # éœæ…‹è³‡æº
â”‚   â”œâ”€â”€ ğŸ¨ css/
â”‚   â”‚   â””â”€â”€ style.css           # ä¸»è¦æ¨£å¼æª” (çµ±ä¸€ç®¡ç†)
â”‚   â”œâ”€â”€ âš¡ js/
â”‚   â”‚   â”œâ”€â”€ script.js           # æ ¸å¿ƒåŠŸèƒ½ (å°èˆªã€èœå–®SPA)
â”‚   â”‚   â””â”€â”€ love-stats.js       # æ„›å¿ƒå…¬ç›Šæ•¸å­—ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ–¼ï¸ img/                  # åœ–ç‰‡è³‡æº
â”‚   â”‚   â””â”€â”€ logo/               # å“ç‰Œåœ–ç‰‡
â”‚   â””â”€â”€ ğŸ“° news.json             # æœ€æ–°æ¶ˆæ¯è³‡æ–™
â””â”€â”€ ğŸ“ templates/               # Jinja2 HTML æ¨¡æ¿
    â”œâ”€â”€ ğŸ  home.html            # é¦–é 
    â”œâ”€â”€ â„¹ï¸ about.html            # é—œæ–¼æˆ‘å€‘
    â”œâ”€â”€ ğŸ½ï¸ menu.html            # èœå–®é é¢
    â”œâ”€â”€ ğŸ“° news.html            # æœ€æ–°æ¶ˆæ¯
    â”œâ”€â”€ â¤ï¸ love.html            # æ„›å¿ƒå…¬ç›Š
    â””â”€â”€ ğŸ” admin.html           # ç®¡ç†å“¡ä»‹é¢
```

## ğŸš€ æœ¬åœ°é–‹ç™¼èˆ‡éƒ¨ç½²

### ğŸ“± æœ¬åœ°å•Ÿå‹•

#### æ–¹æ³• 1: ç›´æ¥åŸ·è¡Œ
```bash
# å®‰è£ä¾è³´
pip install -r requirements.txt

# å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼ (é è¨­åŸ è™Ÿ 8000)
python app.py
```

#### æ–¹æ³• 2: ä½¿ç”¨ç’°å¢ƒè®Šæ•¸
```bash
# è¤‡è£½ç’°å¢ƒè®Šæ•¸ç¯„ä¾‹
cp .env.example .env

# ç·¨è¼¯ .env æª”æ¡ˆè¨­å®šåŸ è™Ÿ
PORT=8000

# å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
python app.py
```

#### æ–¹æ³• 3: VS Code é™¤éŒ¯
1. æŒ‰ `F5` æˆ–é»æ“Šé™¤éŒ¯æŒ‰éˆ•
2. é¸æ“‡ "Flask æœ¬åœ°é™¤éŒ¯" é…ç½®
3. æ‡‰ç”¨ç¨‹å¼æœƒåœ¨åŸ è™Ÿ 8000 å•Ÿå‹•

### ğŸŒ é›²ç«¯éƒ¨ç½²

#### Render éƒ¨ç½² (æ¨è–¦)

1. **Fork å°ˆæ¡ˆåˆ° GitHub**
2. **è¨»å†Š Render å¸³è™Ÿ**: [render.com](https://render.com)
3. **å»ºç«‹æ–°æœå‹™**:
   - é¸æ“‡ "Web Service"
   - é€£æ¥ GitHub å°ˆæ¡ˆ
   - æœå‹™åç¨±: `maze-backend`
   - ç’°å¢ƒ: `Python 3.11`
   - å»ºç½®æŒ‡ä»¤: `pip install -r requirements.txt`
   - å•Ÿå‹•æŒ‡ä»¤: `gunicorn app:app --bind 0.0.0.0:$PORT --workers 2 --timeout 120`

4. **ç’°å¢ƒè®Šæ•¸è¨­å®š**:
   ```
   PYTHON_VERSION=3.11
   FLASK_APP=app.py
   FLASK_ENV=production
   ```

5. **è‡ªå‹•éƒ¨ç½²**: æ¯æ¬¡ push åˆ° main åˆ†æ”¯æœƒè‡ªå‹•éƒ¨ç½²

#### Railway éƒ¨ç½²

1. **è¨»å†Š Railway å¸³è™Ÿ**: [railway.app](https://railway.app)
2. **é€£æ¥ GitHub å°ˆæ¡ˆ**
3. **è‡ªå‹•åµæ¸¬ Python å°ˆæ¡ˆ**
4. **ç’°å¢ƒè®Šæ•¸è¨­å®š**:
   ```
   PORT=8000
   FLASK_APP=app.py
   FLASK_ENV=production
   ```

#### Heroku éƒ¨ç½²

1. **å®‰è£ Heroku CLI**
2. **å»ºç«‹ Heroku æ‡‰ç”¨ç¨‹å¼**:
   ```bash
   heroku create maze-backend
   heroku config:set FLASK_APP=app.py
   heroku config:set FLASK_ENV=production
   ```

3. **éƒ¨ç½²**:
   ```bash
   git push heroku main
   ```

### ğŸ³ Docker éƒ¨ç½²

```bash
# å»ºç½®æ˜ åƒ
docker build -t maze-backend .

# åŸ·è¡Œå®¹å™¨
docker run -p 8000:8000 -e PORT=8000 maze-backend
```

### ğŸ” å¥åº·æª¢æŸ¥

éƒ¨ç½²å®Œæˆå¾Œï¼Œè¨ªå• `/healthz` ç«¯é»ç¢ºèªæœå‹™æ­£å¸¸ï¼š
```bash
curl https://your-app-name.onrender.com/healthz
# å›æ‡‰: {"status": "ok"}
```

## ğŸ”Œ API æ–‡ä»¶

### æ„›å¿ƒå…¬ç›Šæ•¸å­— API

#### ğŸ“Š GET `/api/love-stats`
**åŠŸèƒ½**: å–å¾—æ„›å¿ƒå…¬ç›Šçµ±è¨ˆæ•¸æ“š  
**é€Ÿç‡é™åˆ¶**: 100æ¬¡/åˆ†é˜  
**å¿«å–**: 5åˆ†é˜  

**æˆåŠŸå›æ‡‰ (200)**:
```json
{
  "donation": 714649,
  "updatedAt": "2025-01-22T10:00:00Z",
  "benefit_categories": {
    "total_donation": 714649,      // ç¸½å„ªæƒ é‡‘é¡
    "visually_impaired": 488540,   // è¦–éšœ/è½éšœäººå£«
    "medical_staff": 133468,       // é†«è­·äººå“¡è­‰ç…§
    "filial_piety": 3155,         // å­é †é›™è¦ª
    "matsu_resident": 1160,        // é¦¬ç¥–èº«åˆ†/æ¼æ°‘è­‰
    "new_resident": 1674,          // æ–°ä½æ°‘
    "beach_cleanup": 3780,         // æ·¨ç˜/æ‰‹ä½œæ­¥é“
    "allpass": 78807               // ALLPASS
  }
}
```

#### ğŸ“ POST `/api/love-stats`
**åŠŸèƒ½**: æ›´æ–°æ„›å¿ƒå…¬ç›Šçµ±è¨ˆæ•¸æ“š (ç®¡ç†å“¡å°ˆç”¨)  
**Content-Type**: `application/json`

**è«‹æ±‚æ ¼å¼**:
```json
{
  "donation": 800000,              // å¯é¸ï¼šç¸½é‡‘é¡
  "benefit_categories": {          // å¯é¸ï¼šè©³ç´°é …ç›®
    "visually_impaired": 500000,
    "medical_staff": 150000
    // ... å…¶ä»–é …ç›®
  }
}
```

**æˆåŠŸå›æ‡‰ (200)**:
```json
{
  "message": "Stats updated successfully"
}
```

**éŒ¯èª¤å›æ‡‰**:
```json
// 400 - é©—è­‰éŒ¯èª¤
{
  "error": "Invalid value for medical_staff: must be a positive integer"
}

// 429 - é€Ÿç‡é™åˆ¶
{
  "error": "Rate limit exceeded. Please try again later."
}

// 500 - æœå‹™å™¨éŒ¯èª¤
{
  "error": "Internal server error"
}
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æœ¬åœ°é–‹ç™¼ç’°å¢ƒ

1. **è¤‡è£½å°ˆæ¡ˆ**
```bash
git clone [repository-url]
cd mysite
```

2. **å»ºç«‹ Python è™›æ“¬ç’°å¢ƒ**
```bash
# Windows
python -m venv venv
venv\Scripts\activate

# macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

3. **å®‰è£ä¾è³´å¥—ä»¶**
```bash
pip install -r requirements.txt
```

4. **å•Ÿå‹•é–‹ç™¼æœå‹™å™¨**
```bash
python app.py
```

5. **é–‹å•Ÿç€è¦½å™¨**
```
http://localhost:5000
```

### ğŸ§ª API æ¸¬è©¦

```bash
# å–å¾—æ„›å¿ƒå…¬ç›Šæ•¸å­—
curl http://localhost:5000/api/love-stats

# æ›´æ–°æ•¸å­— (JSON æ ¼å¼)
curl -X POST http://localhost:5000/api/love-stats \
  -H "Content-Type: application/json" \
  -d '{
    "donation": 800000,
    "benefit_categories": {
      "visually_impaired": 500000
    }
  }'

# PowerShell (Windows)
$body = @{
  donation = 800000
  benefit_categories = @{
    visually_impaired = 500000
  }
} | ConvertTo-Json

Invoke-WebRequest -Uri "http://localhost:5000/api/love-stats" `
  -Method POST -Body $body -ContentType "application/json"
```

## ğŸ“Š æ•¸æ“šç®¡ç†

### æ„›å¿ƒå…¬ç›Šæ•¸å­—æ›´æ–°æ–¹å¼

#### 1. ğŸ¯ ç®¡ç†å“¡ä»‹é¢ (æ¨è–¦)
- **ç¶²å€**: `/admin`
- **ç‰¹è‰²**: è¦–è¦ºåŒ–ä»‹é¢ã€å³æ™‚é è¦½ã€å¿«é€Ÿæ“ä½œ
- **åŠŸèƒ½**: 
  - ç•¶å‰æ•¸æ“šé¡¯ç¤º
  - è¡¨å–®æ‰¹é‡æ›´æ–°
  - å¿«é€Ÿèª¿æ•´ (+10%, -10%)
  - ä¸€éµé‡ç½®é»˜èªå€¼

#### 2. ğŸ”§ API ç›´æ¥å‘¼å«
- **é©ç”¨**: è‡ªå‹•åŒ–è…³æœ¬ã€ç¬¬ä¸‰æ–¹ç³»çµ±æ•´åˆ
- **å„ªå‹¢**: ç¨‹å¼åŒ–æ§åˆ¶ã€æ‰¹é‡è™•ç†

#### 3. ğŸ’» ç¨‹å¼ç¢¼ä¿®æ”¹
- **ä½ç½®**: `app.py` â†’ `Config.MOCK_LOVE_STATS`
- **æ³¨æ„**: éœ€é‡å•Ÿæ‡‰ç”¨ç¨‹å¼

### æ•¸æ“šä¾†æºæ“´å±• (æœªä¾†)

```python
# 1. JSON æª”æ¡ˆå­˜å„²
data_file = "data/love-stats.json"

# 2. SQLite è³‡æ–™åº«
from sqlite3 import connect

# 3. å¤–éƒ¨ API æ•´åˆ
import requests
```

## ğŸ”§ é–‹ç™¼æŒ‡å—

### æ·»åŠ æ–°é é¢

1. **å»ºç«‹æ¨¡æ¿**
```bash
# åœ¨ templates/ å»ºç«‹æ–°çš„ HTML æª”æ¡ˆ
touch templates/new_page.html
```

2. **æ·»åŠ è·¯ç”±**
```python
# åœ¨ app.py æ·»åŠ æ–°è·¯ç”±
@app.route("/new-page")
def new_page():
    return render_template("new_page.html")
```

3. **æ›´æ–°å°èˆª**
```html
<!-- åœ¨ header å°èˆªä¸­æ·»åŠ é€£çµ -->
<li class="header__nav-item">
  <a href="{{ url_for('new_page') }}" class="header__nav-link">æ–°é é¢</a>
</li>
```

### è‡ªå®šç¾©æ¨£å¼

```css
/* ä½¿ç”¨ CSS è®Šæ•¸ä¿æŒä¸€è‡´æ€§ */
.custom-component {
  color: var(--color-primary);
  background: var(--color-background);
  padding: var(--spacing-lg);
  border-radius: var(--border-radius-md);
}
```

### JavaScript çµ„ä»¶é–‹ç™¼

```javascript
// éµå¾ªç¾æœ‰çš„é¡åˆ¥æ¶æ§‹
class CustomManager {
  constructor() {
    this.init();
  }
  
  init() {
    // åˆå§‹åŒ–é‚è¼¯
  }
  
  bindEvents() {
    // äº‹ä»¶ç¶å®š
  }
}
```

## ğŸ› å¸¸è¦‹å•é¡Œè§£æ±º

### Q: CORS è·¨ç¶²åŸŸéŒ¯èª¤
**A**: æª¢æŸ¥ `flask-cors` å¥—ä»¶å®‰è£ï¼Œç¢ºèª `CORS(app)` å·²å•Ÿç”¨

### Q: API å¿«å–å•é¡Œ
**A**: 
- API æœ‰ 5 åˆ†é˜å¿«å–æ©Ÿåˆ¶
- å¯ä½¿ç”¨ç®¡ç†å“¡ä»‹é¢çš„ã€Œé‡æ–°æ•´ç†ã€æŒ‰éˆ•
- æˆ–ç­‰å¾…å¿«å–è‡ªå‹•éæœŸ

### Q: 404 é é¢æœªæ‰¾åˆ°
**A**: 
- æª¢æŸ¥ URL æ‹¼å¯«
- ç¢ºèªè·¯ç”±åœ¨ `app.py` ä¸­å·²å®šç¾©
- æª¢æŸ¥æ¨¡æ¿æª”æ¡ˆæ˜¯å¦å­˜åœ¨

### Q: é€Ÿç‡é™åˆ¶éŒ¯èª¤ (429)
**A**: 
- API é™åˆ¶æ¯åˆ†é˜ 100 æ¬¡è«‹æ±‚
- ç­‰å¾… 1 åˆ†é˜å¾Œé‡è©¦
- æˆ–èª¿æ•´ `Config.RATE_LIMIT_MAX` è¨­å®š

### Q: åœ–ç‰‡è¼‰å…¥å¤±æ•—
**A**: 
- æª¢æŸ¥åœ–ç‰‡è·¯å¾‘ï¼š`{{ url_for('static', filename='img/...') }}`
- ç¢ºèªæª”æ¡ˆå­˜åœ¨æ–¼ `static/img/` ç›®éŒ„

## ğŸŒ ç€è¦½å™¨æ”¯æ´

| ç€è¦½å™¨ | ç‰ˆæœ¬è¦æ±‚ | åŠŸèƒ½æ”¯æ´ |
|--------|----------|----------|
| Chrome | 60+ | âœ… å®Œæ•´æ”¯æ´ |
| Firefox | 55+ | âœ… å®Œæ•´æ”¯æ´ |
| Safari | 12+ | âœ… å®Œæ•´æ”¯æ´ |
| Edge | 79+ | âœ… å®Œæ•´æ”¯æ´ |
| IE | âŒ | ä¸æ”¯æ´ |

## ğŸ“ˆ æ•ˆèƒ½æŒ‡æ¨™

- âš¡ **é¦–æ¬¡å…§å®¹ç¹ªè£½**: < 1.5s
- ğŸ¯ **äº’å‹•å°±ç·’æ™‚é–“**: < 2.5s
- ğŸ“± **è¡Œå‹•è£ç½®å‹å–„**: 100% Google PageSpeed
- â™¿ **ç„¡éšœç¤™è©•åˆ†**: AAA ç´šåˆ¥

## ğŸ¯ æœªä¾†è¦åŠƒ

### v1.1.0 (çŸ­æœŸ)
- [ ] ğŸ“§ è¯çµ¡è¡¨å–®åŠŸèƒ½
- [ ] ğŸ—„ï¸ SQLite è³‡æ–™åº«æ•´åˆ
- [ ] ğŸ” ç®¡ç†å“¡ç™»å…¥é©—è­‰
- [ ] ğŸ“± PWA é›¢ç·šæ”¯æ´

### v1.2.0 (ä¸­æœŸ)
- [ ] ğŸŒ å®Œæ•´å¤šèªè¨€æ”¯æ´
- [ ] ğŸ“Š æ•¸æ“šåˆ†æå„€è¡¨æ¿
- [ ] ğŸ”” æ¨æ’­é€šçŸ¥ç³»çµ±
- [ ] ğŸ›’ ç·šä¸Šè¨‚ä½åŠŸèƒ½

### v1.3.0 (é•·æœŸ)
- [ ] ğŸ¤– èŠå¤©æ©Ÿå™¨äºº
- [ ] ğŸ“± æ‰‹æ©Ÿ App æ•´åˆ
- [ ] ğŸ¨ ä¸»é¡Œè‡ªå®šç¾©
- [ ] ğŸ”„ å³æ™‚æ•¸æ“šåŒæ­¥

## ğŸ“‹ ç‰ˆæœ¬è³‡è¨Š

- **ç•¶å‰ç‰ˆæœ¬**: 1.0.0
- **ç™¼å¸ƒæ—¥æœŸ**: 2025-01-22
- **Python éœ€æ±‚**: 3.8+
- **Flask ç‰ˆæœ¬**: 2.3.3
- **æœ€å¾Œæ›´æ–°**: 2025-01-22

## ğŸ“„ æˆæ¬Šè²æ˜

æ­¤å°ˆæ¡ˆç‚ºéº»ç…®MINIçŸ³é ­ç«é‹å°ˆå±¬ç¶²ç«™ï¼ŒåŒ…å«å•†æ¨™ã€åœ–ç‰‡ã€è¨­è¨ˆç­‰çŸ¥è­˜ç”¢æ¬Šã€‚  
åƒ…ä¾›æˆæ¬Šä½¿ç”¨ï¼Œæœªç¶“è¨±å¯ä¸å¾—è¤‡è£½æˆ–å•†æ¥­ä½¿ç”¨ã€‚

---

**é–‹ç™¼åœ˜éšŠ**: éº»ç…®é–‹ç™¼åœ˜éšŠ  
**æŠ€è¡“æ”¯æ´**: [è¯çµ¡æˆ‘å€‘](mailto:support@example.com)  
**å®˜æ–¹ç¶²ç«™**: [éº»ç…®MINIçŸ³é ­ç«é‹](http://localhost:5000)